(this["webpackJsonpchat-frontend"]=this["webpackJsonpchat-frontend"]||[]).push([[0],{132:function(n,e,t){},133:function(n,e,t){"use strict";t.r(e);var r=t(35),c=(t(73),t(24)),i="SET_CURRENT_USER",a="ADD_NEW_CONVERSATION",o="REMOVE_CONVERSATION",s="SET_CONVERSATIONS",u="SEND_MESSAGE",l="RECEIVE_MESSAGE",d="SET_CURRENT_CONVERSATION";var p={username:null,id:null};var b={username:null,position:null};t(74);var j=t(28),f=t(30),x={};var h,m=Object(r.combineReducers)({currentUser:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case i:var t=e.payload,r=t.username,c=t.position;return{username:r,position:c};default:return n}},conversations:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case a:var t=e.payload;return[].concat(Object(c.a)(n),[t]);case s:return Object(c.a)(e.payload);case o:var r=e.payload;return n.filter((function(n){return n.id!==r}));default:return n}},messages:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case u:var t=e.payload,r=t.toUsername,i=t.content,a=n[r]||[],o={content:i,isFromSelf:!0};return Object(f.a)(Object(f.a)({},n),{},Object(j.a)({},r,[].concat(Object(c.a)(a),[o])));case l:var s=e.payload,d=s.fromUsername,p=s.content,b=n[d]||[],h={content:p,isFromSelf:!1};return Object(f.a)(Object(f.a)({},n),{},Object(j.a)({},d,[].concat(Object(c.a)(b),[h])));default:return n}},currentConversation:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case d:var t=e.payload,r=t.username,c=t.id;return{username:r,id:c};default:return n}}});h=Object(r.createStore)(m);t(75);var O=t(0),g=t.n(O),v=t(11),y=t(4);function w(n,e){return{type:i,payload:{username:n,position:e}}}var k,E,S,N,C,R,U,T,_,F,A,z,I,M,V,D,L,J,q,G,Y,B,H=t(29),P=(t(83),t(72)),Q=t.p+"static/media/happy.8a1cb78f.svg",W=t.p+"static/media/paperclip.87c44b2e.svg",K=t.p+"static/media/right-arrow.0a7ea73f.svg",X=t(67),Z=Object(X.io)("https://chat-app-backend-nergiz1.herokuapp.com/",{autoConnect:!1}),$=t(5),nn=t(2),en=function(n){var e=n.toUsername,t=n.onNewMessage,r=Object(O.useState)(""),c=Object(H.a)(r,2),i=c[0],a=c[1],o=Object(O.useState)(!1),s=Object(H.a)(o,2),l=s[0],d=s[1],p=Object(v.b)(),b=Object(O.useRef)();Object(O.useEffect)((function(){return document.addEventListener("click",j),function(){document.removeEventListener("click",j)}}),[]);var j=function(n){!n.target.matches("img.emoji")&&b.current&&(b.current.contains(n.target)||d(!1))};return Object(nn.jsx)(tn,{onSubmit:function(n){n.preventDefault(),p(function(n,e){return{type:u,payload:{toUsername:n,content:e}}}(e.username,i)),Z.emit("chat message",i,e.username,e.id),a(""),setTimeout(t,10)},children:Object(nn.jsxs)(an,{children:[Object(nn.jsx)("img",{className:"paper-clip",src:W,alt:"select-file"}),Object(nn.jsxs)(cn,{children:[Object(nn.jsx)("input",{value:i,className:"enter-message",onChange:function(n){return a(n.target.value)},type:"text",placeholder:"Enter your message here..."}),l&&Object(nn.jsx)("div",{ref:b,className:"emoji-picker",children:Object(nn.jsx)(P.a,{onSelect:function(n){var e=n.unified.split("-"),t=[];e.forEach((function(n){return t.push("0x"+n)}));var r=String.fromCodePoint.apply(String,t);a(i+r)}})}),Object(nn.jsx)("img",{onClick:function(){d(!l)},className:"emoji icon",alt:"emoji",src:Q})]}),Object(nn.jsxs)(rn,{disabled:0===i.length,children:[Object(nn.jsx)("span",{children:"Send"}),Object(nn.jsx)("img",{alt:"arrow",src:K})]})]})})},tn=$.a.form(k||(k=Object(y.a)(["\n  position: absolute;\n  width: 90%;\n  padding: 5px;\n  bottom: 20px;\n  right: 20px;\n  border-radius: 12px;\n  box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;\n  display: flex;\n  background-color: white;\n"]))),rn=$.a.button(E||(E=Object(y.a)(["\n  flex-basis: 10%;\n  padding: 9px 13px;\n  border-radius: 5px;\n  outline: none;\n  cursor: pointer;\n  background-color: #014dfc;\n  border: 1px solid #014dfc;\n  color: white;\n\n  &:disabled {\n    cursor: not-allowed;\n    background-color: gray;\n    border-color: gray;\n  }\n\n  img {\n    width: 13px;\n    margin-left: 5px;\n  }\n"]))),cn=$.a.div(S||(S=Object(y.a)(["\n  position: relative;\n  flex-basis: 80%;\n  margin-right: 10px;\n\n  input {\n    widht: 100%;\n  }\n\n  img.emoji {\n    position: absolute;\n    top: 10px;\n    right: 20px;\n  }\n"]))),an=$.a.div(N||(N=Object(y.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n  padding: 5px;\n\n  .paper-clip {\n    flex-basis: 5%;\n  }\n\n  .enter-message {\n    box-sizing: border-box;\n    width: 100%;\n    padding: 10px 15px;\n    border: 2px solid #f0f0f2;\n    outline: none;\n    position: relative;\n  }\n\n  .emoji {\n    position: absolute;\n    width: 25px;\n    right: 124px;\n    top: 10px;\n    cursor: pointer;\n  }\n\n  .emoji-picker {\n    position: absolute;\n    right: 10px;\n    bottom: 370px;\n    height: 56%;\n  }\n"]))),on=t.p+"static/media/eli.281a1482.jpg",sn=t.p+"static/media/salome.jpg.abf98ecd.jpg",un=function(n){var e=n.messages,t=void 0===e?[]:e,r=n.toUsername,c=Object(O.useRef)();return Object(nn.jsxs)(ln,{children:[Object(nn.jsx)(dn,{ref:c,children:t.map((function(n,e){return n.isFromSelf?Object(nn.jsxs)(pn,{children:[Object(nn.jsx)(bn,{children:n.content}),Object(nn.jsx)(xn,{src:on})]},e):Object(nn.jsxs)(jn,{children:[Object(nn.jsx)(hn,{src:sn}),Object(nn.jsx)(fn,{children:n.content})]},e)}))}),Object(nn.jsx)(en,{onNewMessage:function(){if(c.current){var n=c.current.scrollHeight;c.current.scrollTo({top:n})}},toUsername:r})]})},ln=$.a.div(C||(C=Object(y.a)(["\n  height: 80vh;\n  position: relative;\n  width: 62%;\n  padding-bottom: 100px;\n  background-color: #f2f6fc;\n  border-radius: 20px;\n"]))),dn=$.a.div(R||(R=Object(y.a)(["\n  position: relative;\n  overflow-y: scroll;\n  height: 100%;\n  width: 100%;\n  color: black;\n  display: flex;\n  flex-direction: column;\n"]))),pn=$.a.div(U||(U=Object(y.a)(["\n  width: 100%;\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 10px;\n"]))),bn=$.a.div(T||(T=Object(y.a)(["\n  background-color: #19233b;\n  color: #fff;\n  padding: 5px 25px;\n  margin-right: 5px;\n  border-radius: 7px;\n  align-items: center;\n  display: flex;\n"]))),jn=Object($.a)(pn)(_||(_=Object(y.a)(["\n  justify-content: flex-start;\n"]))),fn=$.a.div(F||(F=Object(y.a)(["\n  align-items: center;\n  background-color: #fff;\n  color: #000;\n  padding: 5px 25px;\n  display: flex;\n  margin-left: 5px;\n  border-radius: 7px;\n"]))),xn=$.a.img(A||(A=Object(y.a)(["\n  width: 44px;\n  height: 47px;\n  border-radius: 50%;\n  margin-right: 10px;\n"]))),hn=Object($.a)(xn)(z||(z=Object(y.a)(["\n  width: 49px;\n  height: 47px;\n  margin-left: 10px;\n"]))),mn=function(){var n=Object(v.c)((function(n){return n.currentUser}));return Object(nn.jsx)(On,{children:Object(nn.jsxs)(yn,{children:[Object(nn.jsx)(gn,{src:on}),Object(nn.jsx)(vn,{children:n.username}),Object(nn.jsx)("span",{children:n.position})]})})},On=$.a.div(I||(I=Object(y.a)(["\n  width: 250px;\n  height: 250px;\n  border-radius: 19px;\n  background-color: #f5f9fc;\n"]))),gn=$.a.img(M||(M=Object(y.a)(["\n  width: 86px;\n  height: 90px;\n  border-radius: 50%;\n"]))),vn=$.a.h3(V||(V=Object(y.a)(["\n  margin: 10px 0;\n  color: #394f60;\n"]))),yn=$.a.div(D||(D=Object(y.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  margin-top: 30px;\n  span {\n    color: #b6c1ce;\n    font-size: 12px;\n  }\n"]))),wn=t(71),kn=t.n(wn).a.create({baseURL:"https://chat-app-backend-nergiz1.herokuapp.com/"}),En=function(n){var e=n.onConversationClick,t=Object(O.useState)(!1),r=Object(H.a)(t,2),c=r[0],i=r[1],u=Object(v.b)(),l=Object(v.c)((function(n){return n.conversations})),d=Object(v.c)((function(n){return n.currentConversation})),p=Object(v.c)((function(n){return n.currentUser}));Object(O.useEffect)((function(){return Z.on("new user",(function(n){u(function(n){return{type:a,payload:n}}(n))})),Z.on("user disconnected",(function(n){u(function(n){return{type:o,payload:n}}(n))})),kn.get("users").then((function(n){var e=n.data.filter((function(n){return n.username!==p.username}));u(function(n){return{type:s,payload:n}}(e))})),function(){Z.off("new user")}}),[]);return Object(nn.jsxs)(Sn,{children:[Object(nn.jsxs)("div",{className:"quick-chat",children:[Object(nn.jsx)("i",{className:"fab fa-facebook-messenger"}),Object(nn.jsx)("h2",{children:"QuickChat"})]}),Object(nn.jsx)(mn,{}),Object(nn.jsxs)(Nn,{children:[Object(nn.jsxs)("div",{className:"active-talk",children:[Object(nn.jsx)("h3",{children:"Active Conversations"}),Object(nn.jsx)("span",{children:l.length}),Object(nn.jsx)("i",{onClick:function(){i(!c)},className:c?"fas fa-chevron-up":"fas fa-chevron-down"})]}),Object(nn.jsx)(Cn,{children:l.map((function(n){return Object(nn.jsxs)(Rn,{onClick:function(){return e(n.username,n.id)},isOpen:c,active:d.id===n.id,children:[Object(nn.jsx)(xn,{src:on}),Object(nn.jsx)("h3",{children:n.username})]},n.username)}))})]})]})},Sn=$.a.div(L||(L=Object(y.a)(["\n  width: 30%;\n  height: auto;\n  display: flex;\n  flex-direction: column;\n  .quick-chat {\n    display: flex;\n    align-items: center;\n    margin-bottom: 10px;\n    h2 {\n      font-size: 21px;\n      margin: 5px 0 13px 0;\n    }\n\n    i {\n      font-size: 31px;\n      color: #7c6bc7;\n      margin-right: 10px;\n    }\n  }\n"]))),Nn=$.a.div(J||(J=Object(y.a)(["\n  height: 50%;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  margin-top: 20px;\n  .active-talk {\n    display: flex;\n    align-items: center;\n    position: relative;\n    h3 {\n      margin: 0;\n    }\n\n    i {\n      position: absolute;\n      right: -53px;\n      cursor: pointer;\n    }\n    span {\n      background-color: #ebedee;\n      font-weight: bold;\n      border-radius: 50%;\n      padding: 5px 9px;\n      margin-left: 7px;\n    }\n  }\n"]))),Cn=$.a.div(q||(q=Object(y.a)(["\n  display: flex;\n  flex-direction: column;\n  margin-top: 10px;\n  width: 73%;\n"]))),Rn=$.a.div(G||(G=Object(y.a)(["\n  display: flex;\n  margin-bottom: 10px;\n  align-items: center;\n  cursor: pointer;\n  opacity: ",";\n  height: ",";\n  margin: ",";\n  transform: ",";\n  transition: all 0.3s linear;\n  padding: 0 8px;\n  background-color: ",";\n  h3 {\n    margin: 0 0 0 10px;\n    color: #394f60;\n  }\n  &:hover {\n    background-color: #f2f6fc;\n    border-radius: 8px;\n  }\n"])),(function(n){return n.isOpen?"1":"0"}),(function(n){return n.isOpen?"auto":"0"}),(function(n){return n.isOpen?"10px 0":"0"}),(function(n){return n.isOpen?"translateY(0)":"translateY(-50px)"}),(function(n){return n.active?"#f2f6fc":"#FFFFFF"}));var Un=$.a.div(Y||(Y=Object(y.a)(["\n  display: flex;\n  height: 100vh;\n  align-items: center;\n  justify-content: center;\n  background-color: white;\n"]))),Tn=$.a.div(B||(B=Object(y.a)(["\n  height: 90%;\n  width: 90%;\n  background-color: white;\n  border-radius: 20px;\n  display: flex;\n"]))),_n=function(){var n=Object(v.c)((function(n){return n.currentConversation})),e=Object(v.c)((function(e){return e.messages[n.username]})),t=Object(v.b)();return Object(O.useEffect)((function(){return Z.on("receive message",(function(n,e){t({type:l,payload:{fromUsername:e,content:n}})})),function(){Z.off("send message")}}),[]),Object(nn.jsx)(Un,{"data-testid":"home-component",children:Object(nn.jsxs)(Tn,{children:[Object(nn.jsx)(En,{onConversationClick:function(n,e){t(function(n,e){return{type:d,payload:{username:n,id:e}}}(n,e))}}),null!==n.id?Object(nn.jsx)(un,{toUsername:n,messages:e}):Object(nn.jsx)("span",{children:"Select a conversation to start chatting"})]})})};t(132);var Fn=function(){var n=Object(v.b)(),e=Object(O.useRef)(),t=Object(O.useRef)();return Object(nn.jsx)("form",{"data-testid":"login-component",className:"login",autoComplete:"off",onSubmit:function(r){r.preventDefault(),n(w(e.current.value,t.current.value)),Z.auth={username:e.current.value,position:t.current.value},Z.connect()},children:Object(nn.jsxs)("div",{className:"form",children:[Object(nn.jsx)("h1",{children:"Login"}),Object(nn.jsx)("div",{className:"username",children:Object(nn.jsx)("input",{id:"username",placeholder:"Enter your username",ref:e})}),Object(nn.jsx)("div",{className:"username position",children:Object(nn.jsx)("input",{id:"position",placeholder:"Enter your position/role",ref:t})}),Object(nn.jsx)("button",{children:"Join chat"})]})})};var An=function(){var n=Object(v.c)((function(n){return n.currentUser})),e=Object(v.b)();return Object(O.useEffect)((function(){return fetch("http://google.com").then((function(n){return n})),function(){e(w(null,null))}}),[]),n.username?Object(nn.jsx)(_n,{}):Object(nn.jsx)(Fn,{})},zn=t(33);t.n(zn).a.render(Object(nn.jsx)(v.a,{store:h,children:Object(nn.jsx)(g.a.StrictMode,{children:Object(nn.jsx)(An,{})})}),document.getElementById("root"))},75:function(n,e,t){}},[[133,1,2]]]);
//# sourceMappingURL=main.bd537c91.chunk.js.map